<div class="top-nav-block"></div>

<nav
  class="header-navbar navbar navbar-expand-lg selected-header"
>
  <div class="collapse navbar-collapse">
    <a
      *ngIf="router.url.includes('/meeting')"
      class="navbar-brand selected-header-link d-flex"
      (click)="routerHelper.goToMeeting(params)"
    ><span class="mx-auto">Meeting</span></a>
  </div>
</nav>

<nav
  class="header-navbar navbar navbar-expand-lg navbar-dark bg-dark fixed-top header-common"
  [class.meeting-header]="router.url.includes('/meeting')"
>
  <button class="navbar-toggler nav-collapse-button" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTopCollapse" aria-controls="navbarTopCollapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarTopCollapse">
    <a
      *ngIf="!router.url.includes('/meeting')"
      class="navbar-brand header-link"
      (click)="routerHelper.goToMeeting(params)"
    >Meeting</a>

    <!-- Right Side -->
    <div style="margin-left:auto">
      <div class="input-group">
        <input
          [value]="searchValue"
          (keyup)="changeSearch($event)"
          class="search-input form-control ms-2"
          type="search"
          list="staticUserIds"
          placeholder="Search"
          aria-label="Search"
        >
  
        <div
          class="dropdown-menu search-drop-down"
          [class.show]="searchValue&&!isSearchValueSelected"
        >
          <div
            *ngFor="let result of searchResults | async"
            class="d-flex ms-2"
            (click)="setSearchValue(result.aboutContent.userName)"
          >
            <img class="rounded-circle search-profile" [src]="getSearchProfileImage(result)">
            <a>
              {{result.aboutContent.userName}}
              <br>
              ({{result.aboutContent.email}})
            </a>
          </div>
          <a
            class="dropdown-item"
            (click)="closeSearchListDropDown()"
          >Close</a>
        </div>
    
        <div [class]="searchValue&&isSearchValueSelected?'dropdown-menu show':'dropdown-menu'">
          <a
            class="dropdown-item"
            (click)="routerHelper.goToProfile({userName:searchValue})"
          >{{searchValue}}'s Profile</a>
          <a
            class="dropdown-item"
            (click)="routerHelper.goToBlogPrologue({userName:searchValue})"
          >{{searchValue}}'s Blog</a>
          <a
            class="dropdown-item"
            (click)="routerHelper.goToTalk({userName:searchValue})"
          >{{searchValue}}'s Talk</a>
          <a
            class="dropdown-item"
            (click)="closeProfileLinkDropDown()"
          >Close</a>
        </div>
      </div>
    </div>
    <ngx-auth-firebaseui-avatar
      class="mx-2"
      *ngIf="authService.isSignedIn()"
      (onSignOut)="authService.onSignOut()"
      [canEditAccount]="true"
    ></ngx-auth-firebaseui-avatar>
    <button
      *ngIf="!authService.isSignedIn()"
      routerLink="/sign-in"
      routerLinkActive="active"
      class="btn btn-secondary sign-in-button"
    >Sign In</button>
  </div>
</nav>
